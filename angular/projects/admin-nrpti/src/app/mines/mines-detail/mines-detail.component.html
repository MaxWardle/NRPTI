<main class="container-fluid-padding">
  <h1 id="name" class="heading-bar">{{mine.name}}
    <span ngbDropdown>
      <button class="btn btn-primary action-drop-button" id="actionDropdown" ngbDropdownToggle>Actions</button>
      <div class="dropdown-menu" aria-labelledby="actionDropdown" ngbDropdownMenu>

        <button class="dropdown-item" [routerLink]="['/p', mine._id, 'project-documents', 'upload']">Upload
          Document</button>
        <button class="dropdown-item" (click)="alert()">Edit</button>
      </div>
    </span>
  </h1>
  <div class="d-flex">
    <h2>Mine Information</h2>
    <span class="badge bg-success badge-published" *ngIf="isPublished">Published</span>
    <span class="badge badge-unpublished" *ngIf="!isPublished">Not Published</span>
  </div>

  <hr>

  <!-- Mine Information -->
  <section>
    <div class="row">
      <!-- column 1/3 -->
      <div class="col-4">
        <div class="row label-pair ml-1 mb-2">
          <div id="permittee"><b>Permittee: </b>{{mine?.permittee || '-' }}</div>
        </div>
        <div class="row label-pair ml-1 mb-2">
          <div id="status"><b>Operating Status: </b>{{mine?.status || '-'}}</div>
        </div>
      </div>
      <!-- column 2/3 -->
      <div class="col-4">
        <div class="row label-pair ml-1 mb-2">
          <div id="permitNumber"><b>Mines Act Permit Number: </b>{{mine?.permitNumbers && mine?.permitNumbers.length > 0 ? mine?.permitNumbers?.join() : '-'}}</div>
        </div>
        <div class="row label-pair ml-1 mb-2">
          <div id="tailingsImpoundments"><b>Number of Tailings Storage Facilities: </b>{{mine?.tailingsImpoundments || '-' }} </div>
        </div>
        <div class="row label-pair ml-1 mb-2">
          <div id="commodities"><b>Commodities: </b>{{mine?.commodities && mine?.commodities?.length > 0 ? mine?.commodities?.join(', ') : '-'}}</div>
        </div>
      </div>
      <!-- column 3/3 -->
      <div class="col-4">
        <div class="row label-pair ml-1 mb-2">
          <div id="region"><b>Region: </b>{{mine?.region || '-' }}</div>
        </div>
        <div class="row label-pair ml-1 mb-2">
          <div id="longitude"><b>Longitude: </b>{{mine?.location ? (mine?.location.coordinates[0]) : '-'}}</div>
        </div>
        <div class="row label-pair ml-1 mb-2">
          <div id="latitude"><b>Latitude: </b>{{mine?.location ? (mine?.location.coordinates[1]) : '-'}}</div>
        </div>
      </div>
    </div>
  </section>

  <hr>

  <div class="row label-pair ml-1 mb-2">
    <label class="font-weight-bold mr-1">Mine Type:</label>
    <div>{{mine?.type || '-'}}</div>
  </div>
  <div class="row label-pair ml-1 mb-2">
    <label class="font-weight-bold mr-1">Mine Description:</label>
    <p>{{mine?.description || '-' }}</p>
  </div>
  <div class="row label-pair ml-1 mb-2">
    <label class="font-weight-bold mr-1">Mine Summary:</label>
    <p>{{mine?.summary || '-' }}</p>
  </div>

  <div  *ngIf="mine && mine.links && mine.links.length > 0" class="d-flex">
    <h2>External Links and Resources</h2>
  </div>

  <hr  *ngIf="mine && mine.links && mine.links.length > 0">

  <div class="row ml-1 mb-2">
    <ul *ngIf="mine && mine.links && mine.links.length > 0" class="link-list">
      <li *ngFor="let link of mine.links">
        <a [href]="link[1]" target="_blank">{{link[0]}}</a>
      </li>
    </ul>
  </div>

  <div class="d-flex">
    <h2>Records</h2>
  </div>

  <hr>

  <!-- Mine Information -->
  <section>
    <div class="row">
      <!-- column 1/3 -->
      <div class="col-4">
        <div class="row label-pair ml-1 mb-2">
          <div id="permittee"><b>Authorization: </b>{{mine?.numAuthorizationDocs || '-' }}</div>
        </div>
      </div>
      <!-- column 2/3 -->
      <div class="col-4">
        <div class="row label-pair ml-1 mb-2">
          <div id="permitNumber"><b>Compliance Oversight: </b>{{mine?.numComplianceOversightDocs || '-' }}</div>
        </div>
      </div>
      <!-- column 3/3 -->
      <div class="col-4">
        <div class="row label-pair ml-1 mb-2">
          <div id="region"><b>Other Documents: </b>{{mine?.numOtherDocs || '-' }}</div>
        </div>
      </div>
    </div>
  </section>

  <div *ngIf="tableData.totalListItems === 0">
    No Records found.
  </div>

  <lib-table-template
    *ngIf="tableData.totalListItems != 0"
    [data]="tableData"></lib-table-template>

</main>
